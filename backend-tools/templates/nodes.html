{% extends "templates/base_template.html" %}

{% block body %}


<h1>Nodes for {{ trajectory.name }}</h1>

<style>
thead th {
  font-size: 1.5em;
  padding: 1px !important;
  height: 15px;
}
h4 {padding-top:10px;}
</style>

<table class="table table-striped">
  <thead class="thead-inverse">
    <tr>
    <th>Node Id</th>
    <th>Node</th>
    <th>Understanding</th>
    <th>Action</th>
  </tr>
</thead>
<tbody>

    {% if (nodes is defined) and nodes %}
    {% for node in nodes %}
    <tr>

  <!-- Node Id -->
  <td>
    <div style="font-size: 2.0em;">
      <a href="#"
      id="uuid"
      data-type="text"
      data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
      data-pk="{{ node.key.urlsafe() }}" data-placement="right" class="is_editable" data-title="Unique Node Id">{{ node.uuid}}
      </a>
    </div>
 </td>
 <td>
    <div>
      <h4>Node Summary</h4>
      <a href="#"
      id="summary"
      data-type="textarea" data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/" data-pk="{{ node.key.urlsafe() }}" data-placement="right" class="is_editable" data-title="Enter Node Summary">{{ node.summary}}
                  </a>
    </div>
                <!-- goal in lesson plan -->
                <!-- -->
                <div><h4>Goals in Lesson Plan</h4>
                    <a href="#" id="goals_in_lesson_plans-{{ node.key.urlsafe() }}"
                    data-type="select"
                    data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                    data-pk="{{ node.key.urlsafe() }}"
                    data-title="Goals in Lesson Plans"
                    data-value="{{ node.goals_in_lesson_plans }}"></a>
                    <script>
                    $(function(){
                        $('#goals_in_lesson_plans-{{ node.key.urlsafe() }}').editable({
                            source: [
                                  {value: 0, text: 'False'},
                                  {value: 1, text: 'True'}
                               ]
                        });
                    });
                    </script>
                  </div>

                  <div>
                    <!-- Level-->
                    <div><h4>Level</h4>
                      <a href="#" id="level-{{ node.key.urlsafe() }}"
                      data-type="select"
                      data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                      data-pk="{{ node.key.urlsafe() }}"
                      data-title="Level"
                      data-value="{{ node.level }}"></a>
                      <script>
                      $(function(){
                          $('#level-{{ node.key.urlsafe() }}').editable({
                              source: [
                                    {value: 0, text: 'Beginner'},
                                    {value: 1, text: 'Intermediate'},
                                    {value: 2, text: 'Advanced'}
                                 ]
                          });
                      });
                      </script>
                    </div>
                  </div>










        </td>


      </td>


<!-- understanding -->
<td>
  <div>
    <h4>Understanding</h4>
    <a href="#" id="understanding"
    data-type="textarea"
    data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
    data-pk="{{ node.key.urlsafe() }}"
    data-placement="right"
    class="is_editable"
    data-title="Enter Node Understanding">{{ node.understanding }}
    </a>
  </div>

  <div><h4>Understanding Learning Goals</h4>
    list
    <div>
      <a href="/tools/trajectory/{{ trajectory.key.urlsafe() }}/node/{{ node.key.urlsafe()}}/learning_goal/?type=understanding class="btn btn-default btn-sm">
        <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
        Add Learning Goal</a>
    </div>


    <a href="#" id="understanding_learning_goals-{{ node.key.urlsafe() }}"
    data-type="checklist"
    data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
    data-pk="{{ node.key.urlsafe() }}"
    data-title="Learning Goals"
    data-value="{{ node.understanding_learning_goals|join(',') }}"></a>
    <script>
    $(function(){
        $('#understanding_learning_goals-{{ node.key.urlsafe() }}').editable({
            source: [
              {% if (learning_goals is defined) and learning_goals %}
              {% for g in learning_goals %}
              {value: '{{ g.key.urlsafe() }}', text: '{{ g.goal  | replace('\r\n', '') | replace("\'",'') | safe }}'},
          {% endfor %}
              {% endif %}

               ]
        });
    });
    </script>
  </div>

<div><h4>Understanding Learning Goal Evidence</h4>
{{ node._understanding_learning_goal_score  }}
</div>

  <!-- Understanding support -->
  <!--
    <div>
    <h4>Understanding Support:</h4>
    <a href="#" id="understanding_support-{{ node.key.urlsafe() }}" data-type="select" data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/" data-pk="{{ node.key.urlsafe() }}" data-title="understanding Support Level" data-value="{{ node.understanding_support }}"></a>
    <script>
      $(function() {
        $('#understanding_support-{{ node.key.urlsafe() }}').editable({
          source: [{
              value: 0,
              text: 'Professional Judgement'
            },
            {
              value: 1,
              text: 'Student Support'
            },
            {
              value: 2,
              text: 'Theoretical'
            }
          ]
        });
      });
    </script>
  </div>
   -->

        <!-- understanding_score -->
        <!--
        <div><h4>Understanding Score:</h4>
          <a href="#" id="understanding_score"
            data-type="text"
            data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
            data-pk="{{ node.key.urlsafe() }}"
            data-placement="right"
            class="is_editable"
            data-title="Enter Understanding Score">{{ node.understanding_score }}
          </a>
        </div>
      -->
      </td>

      <!-- action -->
      <td>
        <div><h4>Action Summary</h4>
          <a href="#" id="action"
            data-type="textarea"
            data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
            data-pk="{{ node.key.urlsafe() }}"
            data-placement="right"
            class="is_editable"
            data-title="Enter Node Action">{{ node.action }}
          </a>
        </div>

          <div><h4>Action Learning Goals</h4>
            <a href="#" id="action_learning_goals-{{ node.key.urlsafe() }}"
            data-type="checklist"
            data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
            data-pk="{{ node.key.urlsafe() }}"
            data-title="Action Learning Goals"
            data-value="{{ node.action_learning_goals|join(',') }}"></a>
            <script>
            $(function(){
                $('#action_learning_goals-{{ node.key.urlsafe() }}').editable({
                    source: [
                      {% if (learning_goals is defined) and learning_goals %}
                      {% for g in learning_goals %}
                      {value: '{{ g.key.urlsafe() }}', text: '{{ g.goal  | replace('\r\n', '') | replace("\'",'') | safe }}'},
                  {% endfor %}
                      {% endif %}

                       ]
                });
            });
            </script>
          </div>

          <div><h4>Action Learning Goal Evidence</h4>
          {{ node._action_learning_goal_score  }}
          </div>


      <!-- action supprt

        <div><h4>Action Support</h4>
          <a href="#" id="action_support-{{ node.key.urlsafe() }}"
          data-type="select"
          data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
          data-pk="{{ node.key.urlsafe() }}"
          data-title="Action Support Level"
          data-value="{{ node.action_support }}"></a>
          <script>
          $(function(){
              $('#action_support-{{ node.key.urlsafe() }}').editable({
                  source: [
                        {value: 0, text: 'Professional Judgement'},
                        {value: 1, text: 'Student Support'},
                        {value: 2, text: 'Theoretical'}
                     ]
              });
          });
          </script>
        </div>
-->
      <!-- actino activity -->
        <div><h4>Assesment Activity Text</h4>
          <a href="#" id="action_activity_text"
            data-type="textarea"
            data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
            data-pk="{{ node.key.urlsafe() }}"
            data-placement="right"
            class="is_editable"
            data-title="Enter Action Acivity Assessment">{{ node.action_activity_text }}
          </a>
        </div>
        <br/>
        <div><h4>Assesment Link:</h4>
          <a href="#" id="action_activity_url"
            data-type="text"
            data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
            data-pk="{{ node.key.urlsafe() }}"
            data-placement="right"
            class="is_editable"
            data-title="Enter Action Acivity Assessment Link">{{ node.action_activity_url }}
          </a>
        </div>
        <br/>
        <div><h4>Assesment PDF:</h4>
          <a href="#" id="action_activity_pdf"
            data-type="text"
            data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
            data-pk="{{ node.key.urlsafe() }}"
            data-placement="right"
            class="is_editable"
            data-title="Enter Action Acivity Assessment Link">{{ node.action_activity_pdf }}
          </a>
        </div>
      </td>

      <!--
       DLETE
      <td>
        <a href="/tools/trajectory/node/{{ node.key.urlsafe() }}/?mode=delete">
        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
      </td>
    -->


    <!-- /table row -->
    </tr>
    {% endfor %}
    {% endif %}
  </table>

  <div>
    <a href="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/?mode=new"
      class="btn btn-default btn-lg">
      <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
      Add New Nodes</a>
  </div>


  <h1>Arrows for {{ trajectory.name }}</h1>
  <table class="table table-striped">
    <thead class="thead-inverse">
      <tr>
      <th>Id</th>
      <th>Node Start</th>
      <th>Node End</th>
      <th>Explanation</th>
      <th>Text</th>
      <th>Link</th>
      <th>PDF</th>
      <th>Unplugged</th>
    </tr>
  </thead>
  <tbody>
        {% if (arrows is defined) and arrows %}
        {% for arrow in arrows %}

        <tr>
          <!-- summary -->
            <td>
            {{arrow.key.id()}}
          </td>

          <!-- Node in -->
          <td>
            <div>
                <a href="#" id="arrow_start_node-{{ arrow.key.urlsafe() }}"
                data-type="select"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-title="Select Arrows In"
                data-value="{{ arrow.start_node }}"></a>
                <script>
                $(function(){
                    $('#arrow_start_node-{{ arrow.key.urlsafe() }}').editable({
                        source: [
                          {% if (nodes is defined) and nodes %}
                          {% for node in nodes %}
                              {value: {{ node.key.id() }}, text: '{{ node.uuid }}'},
                          {% endfor %}
                          {% endif %}
                           ]
                    });
                });
                </script>
              </div>
          </td>
<!-- value key node.key.id() -->


          <!-- Node Out -->
          <td>
            <div>
                <a href="#" id="arrow_end_node-{{ arrow.key.urlsafe() }}"
                data-type="select"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-title="Select Arrows In"
                data-value="{{ arrow.end_node }}"></a>
                <script>
                $(function(){
                    $('#arrow_end_node-{{ arrow.key.urlsafe() }}').editable({
                        source: [
                          {% if (nodes is defined) and nodes %}
                          {% for node in nodes %}
                              {value: {{ node.key.id() }}, text: '{{ node.uuid }}'},
                          {% endfor %}
                          {% endif %}
                           ]
                    });
                });
                </script>
              </div>
          </td>



          <td>
            <div>
              <a href="#" id="arrow_explination"
                data-type="textarea"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-placement="right"
                class="is_editable"
                data-title="Enter Arrow Description">{{ arrow.explination}}
              </a>
            </div>
          </td>

          <td>
            <div>
              <a href="#" id="arrow_description"
                data-type="textarea"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-placement="right"
                class="is_editable"
                data-title="Enter Arrow Description">{{ arrow.description}}
              </a>
            </div>
          </td>

          <td>
            <div>
              <a href="#" id="arrow_url"
                data-type="text"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-placement="right"
                class="is_editable"
                data-title="Enter Arrow Link">{{ arrow.url}}
              </a>
            </div>
          </td>

          <td>
            <div>
              <a href="#" id="arrow_pdf"
                data-type="text"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-placement="right"
                class="is_editable"
                data-title="Enter Arrow Description">{{ arrow.pdf}}
              </a>
            </div>
          </td>

          <!-- Unplugged -->
          <td>
            <div>
                <a href="#" id="unplugged-{{ arrow.key.urlsafe() }}"
                data-type="select"
                data-url="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/"
                data-pk="{{ arrow.key.urlsafe() }}"
                data-title="Select Arrows Out"
                data-value="{{ arrow.unplugged }}"></a>
                <script>
                $(function(){
                    $('#unplugged-{{ arrow.key.urlsafe() }}').editable({
                        source: [
                            {value: 0, text: 'False'},
                            {value: 1, text: 'True'}
                           ]
                    });
                });
                </script>
              </div>
          </td>


        </tr>
          {% endfor %}
          {% endif %}
          </table>

          <div>
            <a href="/tools/trajectory/{{ trajectory.key.urlsafe() }}/nodes/?mode=new_arrow"
              class="btn btn-default btn-lg">
              <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
              Add New Arrow</a>
          </div>




{% endblock %}
